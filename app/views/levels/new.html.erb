<!-- 理解度選択 / 変更 共通 -->
<div id="level-select" data-mode="<%= @mode %>">
  <div class="max-w-6xl mx-auto px-4 pt-12 pb-16">
    <!-- タイトル -->
    <div class="text-center mb-12">
      <h1 class="text-3xl font-bold text-blue-900">
        <span class="inline-block">
          <%= t("levels.title.#{@mode}") %>
          <span class="block h-1 bg-card-gradient rounded-full mt-2"></span>
        </span>
      </h1>
    </div>

    <!-- カード一覧 -->
      <div class="grid md:grid-cols-3 gap-12 justify-items-center mt-12">

        <% @levels.each do |level| %>
          <div
            class="
               w-full max-w-md px-10 py-14
              bg-card-gradient text-white
              rounded-2xl
              shadow-md
              hover:shadow-2xl
              hover:-translate-y-2
              hover:scale-[1.02]
              transition-all duration-300 ease-out
              cursor-pointer
              relative
            "
            data-level="<%= level[:key] %>"
          >
            <!-- 見出し -->
            <h3 class="font-bold text-2xl mb-6">
              <%= level[:label] %>
            </h3>

            <!-- 説明リスト -->
            <ul class="text-white/90 space-y-1 mb-6">
              <% level[:descriptions].each do |text| %>
                <li>・<%= text %></li>
              <% end %>
            </ul>

            <!-- 補足説明 -->
            <p class="text-white/80 font-medium mb-14">
              <%= level[:note] %>
            </p>

            <!-- 決定ボタン -->
            <%= form_with url: level_path,
                          method: :patch,
                          local: true,
                          data: { turbo: false } do %>

              <%= button_tag type: "submit",
                    name: "level",
                    value: level[:key],
                    class: "
                      decide-button
                      absolute bottom-6 right-6
                      bg-white
                      text-blue-700
                      text-sm
                      font-semibold
                      px-4 py-2
                      rounded-lg
                      shadow
                      hover:bg-gray-100
                      transition
                    " do %>

                <%= t("levels.button.#{@mode}") %>
              <% end %>
            <% end %>
          </div>
        <% end %>

      </div>
    </div>

    <% if @mode == :edit %>
      <div class="text-center mt-16">
        <%= link_to terms_path,
            data: { turbo: false },
            class: "
            inline-flex items-center gap-2
            bg-white text-blue-700
            font-semibold text-sm
            px-5 py-3
            rounded-lg
            shadow
            hover:bg-gray-100
            transition
            " do %>
          <%= t("levels.link.to_terms") %>
          <svg xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5"
              fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 5l7 7-7 7" />
          </svg>
        <% end %>
      </div>
    <% end %>
  </div>
</div>