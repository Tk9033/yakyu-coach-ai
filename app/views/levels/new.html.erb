<!-- 理解度選択 / 変更 共通 -->
<div id="level-select" data-mode="<%= @mode %>">
  <div class="container mx-auto py-16">

    <!-- タイトル -->
    <div class="text-center mb-12">
      <h1 class="text-3xl font-bold">
        <%= t("levels.title.#{@mode}") %>
      </h1>
    </div>

    <!-- カード一覧 -->
    <div class="flex justify-center">
      <div class="grid md:grid-cols-3 gap-10">

        <% @levels.each do |level| %>
          <div
            class="card w-96 p-8 shadow hover:bg-blue-50 cursor-pointer relative"
            data-level="<%= level[:key] %>"
          >
            <!-- 見出し -->
            <h3 class="font-bold text-2xl mb-4">
              <%= level[:label] %>
            </h3>

            <!-- 説明リスト -->
            <ul class="text-gray-700 space-y-1 mb-6">
              <% level[:descriptions].each do |text| %>
                <li>・<%= text %></li>
              <% end %>
            </ul>

            <!-- 補足説明 -->
            <p class="text-gray-600 font-medium mb-14">
              <%= level[:note] %>
            </p>

            <!-- 決定ボタン -->
            <%= form_with url: level_path,
                          method: :patch,
                          local: true,
                          data: { turbo: false } do %>

              <%= button_tag type: "submit",
                    name: "level",
                    value: level[:key],
                    class: "
                      decide-button
                      absolute bottom-6 right-6
                      bg-blue-600
                      text-white
                      text-sm
                      px-4 py-2
                      rounded-md
                      shadow
                      hover:bg-blue-700
                      transition
                    " do %>

                <%= t("levels.title.#{@mode}") %>
              <% end %>
            <% end %>
          </div>
        <% end %>

      </div>
    </div>

    <% if @mode == :edit %>
      <div class="text-center mt-16">
        <%= link_to terms_path,
            data: { turbo: false },
            class: "
              inline-flex items-center gap-2
              bg-blue-600 text-white text-sm
              px-4 py-2
              rounded-md shadow
              hover:bg-blue-700
              transition
            " do %>
          <%= t("levels.link.to_terms") %>
          <svg xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5"
              fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 5l7 7-7 7" />
          </svg>
        <% end %>
      </div>
    <% end %>
  </div>
</div>